<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="google-site-verification" content="hOPJVnxeH9MyLDNFi8Cx1EI46kEUhj24S7woc-uKAgw" />

    <title>Cosmetic Dentist Jalpaiguri | #1 Digital Smile Makeover Studio</title>
    <meta name="description" content="Jalpaiguri‚Äôs Premier Cosmetic Dental Center. Dr. S. Roy (Sr. Dental Surgeon) specializes in Digital Smile Makeovers, Veneers, and Gap Closure. 27+ Years Experience.">
    <meta name="keywords" content="Cosmetic Dentist Jalpaiguri, Smile Makeover, Digital Smile Design, Veneers, Gap Teeth Fix, Dr Sudip Roy, Dental Surgeon, Esthetic Dentistry">
    
    <meta property="og:title" content="Dr. S. Roy | #1 Cosmetic Dentist & Smile Designer">
    <meta property="og:description" content="Jalpaiguri's Premier Digital Smile Studio. Try our AI Smile Simulator.">
    <meta property="og:image" content="logo.png">
    <meta property="og:url" content="https://bestcosmeticdentistjalpaiguri.github.io/">
    <meta property="og:type" content="website">

    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Dentist",
      "name": "Dr. S. Roy's Cosmetic Dental Studio",
      "image": "logo.png",
      "@id": "https://bestcosmeticdentistjalpaiguri.github.io",
      "url": "https://bestcosmeticdentistjalpaiguri.github.io",
      "telephone": "+918918935056",
      "priceRange": "$$",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "Pahari Para, Near V-Mart, Opp. ANGIRA Apartment",
        "addressLocality": "Jalpaiguri",
        "postalCode": "735101",
        "addressRegion": "West Bengal",
        "addressCountry": "IN"
      },
      "geo": { "@type": "GeoCoordinates", "latitude": 26.5405, "longitude": 88.7193 },
      "sameAs": [
        "https://www.facebook.com/bestdentalclinic.Jalpaiguridentalclinic.smile?mibextid=ZbWKwL",
        "https://www.instagram.com/drsudipsdentalclinic",
        "https://www.youtube.com/@dentistjalpaiguri",
        "https://jsdl.in/DT-99SZ3I1WFPL",
        "https://www.practo.com/jalpaiguri/doctor/dr-sudip-roy-dentist"
      ]
    }
    </script>

    <style>
        /* --- THEME: GOLD & BLACK --- */
        :root { --gold: #d4af37; --dark: #0f0f0f; --panel: #1a1a1a; --text: #f0f0f0; --accent: #2ecc71; }
        body { font-family: 'Lato', sans-serif; margin: 0; padding: 0; background: var(--dark); color: var(--text); overflow-x: hidden; text-align: center; -webkit-user-select: none; -ms-user-select: none; user-select: none; }
        h1, h2, h3 { font-family: 'Playfair Display', serif; color: var(--gold); }
        a { text-decoration: none; color: inherit; transition: 0.3s; }

        /* --- HEADER --- */
        header { background: rgba(0,0,0,0.95); padding: 10px 20px; position: sticky; top: 0; border-bottom: 1px solid var(--gold); z-index: 1000; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 4px 15px rgba(0,0,0,0.8); }
        
        .logo-container { display: flex; align-items: center; gap: 12px; cursor: pointer; }
        .logo-img { height: 50px; width: 50px; border-radius: 50%; border: 2px solid var(--gold); background: #fff; padding: 2px; object-fit: contain; }
        .logo-text { font-size: 1.1rem; text-transform: uppercase; letter-spacing: 1px; color: var(--gold); line-height: 1.1; text-align: left; }
        
        .header-center { display: flex; justify-content: center; }
        .nap-box { display: flex; align-items: center; gap: 10px; border: 1px solid var(--gold); padding: 5px 12px; border-radius: 4px; text-decoration: none; background: rgba(212, 175, 55, 0.05); transition: 0.3s; }
        .nap-box:hover { background: rgba(212, 175, 55, 0.2); }
        .direction-arrow { color: var(--accent); font-size: 18px; animation: bounceRight 1s infinite; }
        .nap-text-group { text-align: left; }
        .nap-label { display: block; color: var(--gold); font-size: 8px; font-weight: bold; letter-spacing: 1px; text-transform: uppercase; }
        .nap-address { display: block; color: #fff; font-size: 11px; font-weight: 500; }
        @keyframes bounceRight { 0%, 100% { transform: translateX(0); } 50% { transform: translateX(3px); } }

        .header-actions { display: flex; gap: 10px; align-items: center; }
        .btn-gold { background: var(--gold); color: white; padding: 8px 15px; border-radius: 2px; font-weight: bold; font-size: 12px; text-transform: uppercase; transition: 0.3s; border: 1px solid var(--gold); }
        .btn-gold:hover { background: #b5952f; border-color: #b5952f; }
        .btn-outline { background: transparent; color: var(--gold); border: 1px solid var(--gold); padding: 8px 12px; border-radius: 2px; }
        .btn-wa-icon { font-size: 18px; text-decoration: none; margin-left: 5px; }

        @media (max-width: 650px) { .header-center { display: none; } .btn-outline { display: none; } }

        /* --- HERO --- */
        .hero { padding: 100px 20px 60px; background: linear-gradient(rgba(0,0,0,0.85), rgba(0,0,0,0.85)), url('https://images.unsplash.com/photo-1606811971618-4486d14f3f72?w=1200&q=80'); background-size: cover; background-position: center; }
        h1 { font-size: 2.5rem; margin-bottom: 10px; color: #fff; text-shadow: 0 2px 10px rgba(0,0,0,0.5); }
        .subtext { color: var(--gold); font-size: 1.1rem; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 40px; }
        
        /* --- GRID --- */
        .grid-services { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; max-width: 1000px; margin: 40px auto; padding: 0 20px; }
        .service-card { background: var(--panel); border: 1px solid #333; padding: 30px; text-align: center; transition: 0.3s; border-radius: 4px; cursor: pointer; display: block; text-decoration: none; }
        .service-card:hover { border-color: var(--gold); transform: translateY(-5px); background: #222; }
        .icon { font-size: 2rem; margin-bottom: 15px; color: var(--gold); }

        /* --- PROFILE --- */
        .profile { background: #050505; padding: 60px 20px; margin-top: 50px; border-top: 1px solid #333; }
        .profile-box { max-width: 700px; margin: 20px auto; background: #111; border: 1px solid #333; border-left: 4px solid var(--gold); padding: 30px; text-align: left; border-radius: 8px; }
        .profile-list { color: #ccc; line-height: 1.8; font-size: 0.95rem; }
        .stats { display: flex; justify-content: center; gap: 30px; margin-top: 30px; flex-wrap: wrap; }
        .stat-item { border: 1px solid var(--gold); padding: 15px 25px; border-radius: 4px; background: rgba(212,175,55,0.05); }
        .stat-num { font-size: 1.5rem; font-weight: bold; color: var(--gold); display: block; }
        .stat-label { font-size: 0.7rem; text-transform: uppercase; letter-spacing: 1px; color: #aaa; }
        .contact-info { margin-top: 30px; font-size: 1rem; color: #fff; line-height: 1.6; }

        /* --- MAP & FOOTER --- */
        .map-section { padding: 40px 20px; background: #000; border-top: 1px solid #333; text-align: center; }
        .map-title { color: var(--gold); margin-top:0; font-size: 1.4rem; font-weight: 800; letter-spacing: 1px; text-transform: uppercase; margin-bottom: 5px; }
        .map-subtitle { font-size: 0.9rem; color: #fff; margin-bottom: 20px; font-weight: 500; margin-top: 0; }
        .map-address { font-size: 0.9rem; line-height: 1.6; margin-bottom: 20px; color: #ccc; }
        .footer-social { display: flex; justify-content: center; gap: 20px; margin: 20px 0; }
        .social-icon img { width: 28px; filter: invert(75%) sepia(36%) saturate(674%) hue-rotate(2deg) brightness(90%) contrast(88%); transition: 0.3s; }
        .social-icon:hover img { filter: none; }

        /* --- HIDDEN DOCTOR APP --- */
        #doctorApp { display: none; position: fixed; inset: 0; background: #0b1220; z-index: 9999; overflow-y: auto; padding: 20px; text-align: left; }
        .app-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px solid #333; padding-bottom: 10px; }
        .panel { background: #151d2e; border: 1px solid rgba(255,255,255,0.1); padding: 15px; border-radius: 8px; margin-bottom: 15px; }
        .canvas-wrap { position: relative; width: 100%; min-height: 300px; background: #000; border: 1px solid #333; display: flex; justify-content: center; align-items: center; overflow: hidden; }
        canvas { max-width: 100%; height: auto; cursor: crosshair; }
        .controls { display: flex; gap: 10px; flex-wrap: wrap; margin-top: 10px; }
        .control-label { display: block; font-size: 12px; color: #999; margin-bottom: 5px; }
        input[type="text"], input[type="number"], input[type="password"], select { background: #222; border: 1px solid #444; color: white; padding: 8px; border-radius: 4px; width: 100%; box-sizing: border-box; }
        .app-btn { background: var(--gold); border: none; padding: 8px 16px; color: #000; font-weight: bold; border-radius: 4px; cursor: pointer; }
        .app-btn:hover { background: #fff; }
        .app-btn-sec { background: transparent; border: 1px solid #555; color: #ccc; padding: 8px 16px; border-radius: 4px; cursor: pointer; }
        #loading { display: none; position: absolute; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); color:var(--gold); align-items:center; justify-content:center; flex-direction:column; z-index:10; font-weight:bold; }
        #keyModal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 10000; justify-content: center; align-items: center; }
        .modal-box { background: #222; padding: 30px; border: 1px solid var(--gold); border-radius: 8px; max-width: 400px; text-align: center; }
        #aiResultModal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 10001; justify-content: center; align-items: center; padding: 20px; }
        .ai-result-box { background: #1a1a1a; border: 2px solid var(--gold); padding: 30px; max-width: 600px; width: 100%; max-height: 80vh; overflow-y: auto; color: #ddd; line-height: 1.6; border-radius: 8px; white-space: pre-line; }
        .export-label { font-size:11px; color:#aaa; text-transform:uppercase; margin-bottom:5px; display:block; }
    </style>
</head>
<body>

    <header>
        <div class="logo-container" id="secretTrigger">
            <img src="logo.png" alt="Dr. S. Roy" class="logo-img">
            <div class="logo-text">Dr. S. Roy<br><span style="font-size:0.6em; color:#fff;">AESTHETICS</span></div>
        </div>
        <div class="header-center">
            <a href="https://maps.app.goo.gl/wKr9LJbUsqLs4t9F9" target="_blank" class="nap-box">
                <span class="direction-arrow">‚û§</span>
                <div class="nap-text-group"><span class="nap-label">Get Directions</span><span class="nap-address">Pahari Para, Jalpaiguri</span></div>
            </a>
        </div>
        <div class="header-actions">
            <a href="https://dentistjalpaiguri.github.io/appointment.html" class="btn-gold">Book Online</a>
            <a href="tel:+918918935056" class="btn-outline">üìû</a>
            <a href="https://wa.me/918918935056" class="btn-wa-icon">üí¨</a>
        </div>
    </header>

    <section class="hero">
        <h1>DIGITAL SMILE PORTFOLIO</h1>
        <p class="subtext">Jalpaiguri's Premier Digital Aesthetic Center</p>
        <p style="color:#ccc; font-size:0.9rem; max-width:600px; margin:0 auto 30px;">Expert treatments for Gap Teeth, Braceless Correction, and Wedding Makeovers.</p>
        <a href="https://dentistjalpaiguri.github.io/appointment.html" class="btn-gold" style="font-size:14px; padding:12px 30px;">üìÖ Schedule Consultation (‚Çπ500)</a>
    </section>

    <div class="grid-services">
        <a href="https://wa.me/918918935056?text=Hi Dr. Roy, interested in Digital Smile Design." target="_blank" class="service-card">
            <div class="icon">‚ú®</div><h3>Digital Design</h3><p style="font-size:13px; color:#aaa;">Advanced simulation before treatment.<br><span style="color:var(--gold);">üëâ CHAT WITH DOCTOR</span></p>
        </a>
        <a href="https://bestdentistjalpaiguri.github.io/" target="_blank" class="service-card">
            <div class="icon">ü¶∑</div><h3>Ceramic Veneers</h3><p style="font-size:13px; color:#aaa;">E-Max veneers for perfect shape.<br><span style="color:var(--accent);">üí∞ CHECK COST (SITE 2)</span></p>
        </a>
        <a href="https://smilemakeoverjalpaiguri.github.io/" target="_blank" class="service-card">
            <div class="icon">üíç</div><h3>Wedding Package</h3><p style="font-size:13px; color:#aaa;">Camera-ready smile in 5-7 days.<br><span style="color:var(--gold);">üëâ VIEW GALLERY (SITE 3)</span></p>
        </a>
    </div>

    <div class="profile">
        <h2 style="font-size:2rem; margin-bottom: 5px;">Dr. Sudip Roy</h2>
        <p style="font-size:1rem; color:var(--gold); font-weight:bold; text-transform:uppercase; letter-spacing:1px; margin-top:0;">Sr. Consultant Oral & Cosmetic Dental Surgeon</p>
        <div class="profile-box"><div class="profile-list"><p style="margin-bottom:15px; color:#fff;">‚ú® <strong>Certified Dental Implantologist</strong></p><p style="margin-bottom:5px; color:#aaa;">üìå <strong>Formerly Attached To:</strong></p><p style="margin-left: 15px; margin-bottom:15px; color:#ddd;">üîπ North Bengal Dental College & Hospital<br>üîπ Eastern Railway Divisional Hospital</p><p style="color:var(--gold); font-weight:bold;">‚ú® Jalpaiguri‚Äôs Most Trusted Dental Expert</p></div></div>
        <div class="stats"><div class="stat-item"><span class="stat-num">27+</span><span class="stat-label">Years Experience</span></div><div class="stat-item"><span class="stat-num">20,000+</span><span class="stat-label">Happy Smiles</span></div></div>
        <div class="contact-info">ü¶∑ Dr. S. Roy‚Äôs SMILE Dental Clinic<br><span style="color:#888; font-size:0.9rem;">Pahari Para, Near V-Mart, Jalpaiguri</span><br><a href="tel:8918935056" style="display:inline-block; margin-top:10px; color:var(--gold); font-weight:bold; font-size:1.2rem;">üìû 8918935056</a></div>
    </div>

    <div class="map-section">
        <h4 class="map-title">Dr. S. Roy's SMILE Dental Clinic</h4><p class="map-subtitle">Jalpaiguri‚Äôs First & #1 Digital Smile Makeover & Multispeciality Centre</p><p class="map-address">üìç Pahari Para, Near V-Mart,<br>Opp. ANGIRA Apartment & Net Plaza,<br>Jalpaiguri ‚Äì 735101, West Bengal</p>
        
        <iframe src="https://maps.google.com/maps?q=Dr.+S.+Roy's+SMILE+Dental+Clinic+Pahari+Para+Jalpaiguri&t=&z=15&ie=UTF8&iwloc=&output=embed" width="100%" height="300" style="border:0; filter: grayscale(100%) invert(90%); border-radius:4px; margin-top:15px;"></iframe>
        
        <div style="margin-top:20px;">
            <a href="https://maps.google.com/maps?q=Dr.+S.+Roy's+SMILE+Dental+Clinic+Pahari+Para+Jalpaiguri" target="_blank" class="btn-gold" style="padding:10px 25px; border-radius:30px;">üìç Get Road Directions</a>
        </div>

        <div class="footer-social">
            <a href="https://www.facebook.com/bestdentalclinic.Jalpaiguridentalclinic.smile?mibextid=ZbWKwL" target="_blank" class="social-icon"><img src="https://cdn-icons-png.flaticon.com/512/733/733547.png" alt="FB"></a>
            <a href="https://www.instagram.com/drsudipsdentalclinic" target="_blank" class="social-icon"><img src="https://cdn-icons-png.flaticon.com/512/2111/2111463.png" alt="IG"></a>
            <a href="https://www.youtube.com/@dentistjalpaiguri" target="_blank" class="social-icon"><img src="https://cdn-icons-png.flaticon.com/512/1384/1384060.png" alt="YT"></a>
        </div>
        <p style="font-size:11px; color:#666;">¬© 2025 Dr. S. Roy Aesthetics.</p>
    </div>

    <div id="doctorApp">
        <div class="app-header"><h2 style="color:var(--gold); margin:0;">üîê DentAi Pro Tool</h2><div><button onclick="openKeyModal()" class="app-btn-sec" style="font-size:10px; margin-right:5px;">üîê TOKEN</button><button onclick="lockApp()" class="app-btn-sec" style="color:#e74c3c; border-color:#e74c3c;">Exit</button></div></div>
        <div class="panel"><div class="control-label">1. Upload Patient Photo (Frontal Smile)</div><input type="file" id="imgUpload" accept="image/*" class="app-btn-sec" style="width:100%"></div>
        <div class="canvas-wrap" id="canvasContainer"><canvas id="dsdCanvas"></canvas><div id="placeholder" style="color:#666;">No Image Loaded</div><div id="loading">‚ú® GENERATING AI PROTOCOL...<br><span style="font-size:10px; color:#aaa;">Please wait</span></div></div>
        <div class="panel"><div class="control-label">2. DSD Tools</div><div class="controls"><button onclick="toggleOverlay('grid')" class="app-btn-sec">Grid</button><button onclick="toggleOverlay('midline')" class="app-btn-sec">Midline</button><button onclick="toggleOverlay('golden')" class="app-btn-sec">Golden Ratio</button><button onclick="clearOverlays()" class="app-btn-sec">Clear</button></div></div>
        <div class="panel" style="border: 1px solid var(--accent);"><div class="control-label" style="color:var(--accent);">3. AI CLINICAL ANALYSIS</div><select id="aiPrompt" style="margin-bottom:10px;"><optgroup label="ESTHETICS"><option value="dsd_master">‚ú® Ultra-Realistic DSD (8K Protocol)</option><option value="hollywood">üåü Hollywood Smile (BL1 Shade)</option><option value="natural">üçÉ Natural Smile Design (A1/B1)</option><option value="gummy">üíß Gummy Smile Correction</option></optgroup><optgroup label="RESTORATIVE"><option value="comprehensive">ü¶∑ Comprehensive Rehab Plan</option><option value="fracture">üî® Class IV Fracture Repair</option></optgroup><optgroup label="ORTHODONTICS"><option value="diastema">üìè Diastema Closure (Gap)</option><option value="crowding">üåÄ Crowding / Alignment</option></optgroup></select><button onclick="runAI()" class="app-btn" style="width:100%; background:var(--accent); color:black;">‚ú® AI Magic Makeover</button></div>
        
        <div class="panel" style="border: 1px solid var(--gold); margin-top:15px;">
            <div class="control-label" style="color:var(--gold);">4. SOCIAL MEDIA EXPORT üì∏</div>
            <label class="export-label" style="color:#aaa; font-size:10px;">Watermark Text:</label>
            <input type="text" id="watermarkText" value="Dr. S. Roy's SMILE Clinic | 8918935056" style="margin-bottom:10px;">
            <div class="controls" style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
                <button onclick="downloadSocial(false)" class="app-btn-sec">Save Single</button>
                <button onclick="downloadSocial(true)" class="app-btn-sec">Save 1:1</button>
                <button onclick="downloadComparison()" class="app-btn" style="grid-column: span 2; background:var(--gold); color:black; font-weight:800;">üì∏ Generate Before/After</button>
            </div>
        </div>
    </div>

    <div id="keyModal"><div class="modal-box"><h3>üîê Doctor Authentication</h3><p style="color:#aaa; font-size:12px;">Enter the secure access code sent to your official email.</p><input type="password" id="apiKeyInput" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"><button onclick="saveKey()" class="app-btn" style="margin-top:15px;">Verify & Login</button><button onclick="closeKeyModal()" class="app-btn-sec" style="margin-top:10px;">Cancel</button></div></div>
    <div id="aiResultModal"><div class="ai-result-box"><h3 style="color:var(--accent); margin-top:0;">ü§ñ DentAi Analysis</h3><div id="aiOutputText"></div><button onclick="document.getElementById('aiResultModal').style.display='none'" class="app-btn" style="margin-top:20px; width:100%;">CLOSE</button></div></div>

    <script>
        // --- SECURITY ---
        document.addEventListener('contextmenu', event => event.preventDefault());
        document.onkeydown = function(e) { if(e.keyCode == 123) return false; if(e.ctrlKey && (e.keyCode == 'I'.charCodeAt(0) || e.keyCode == 'J'.charCodeAt(0) || e.keyCode == 'U'.charCodeAt(0))) return false; }
        const SECRET_HASH = "c21pbGUxMjM="; let tapCount = 0; let isGenerating = false; let lastRequestSignature = "";

        // --- ENCRYPTED PROMPTS ---
        const ENCRYPTED_PROMPTS = {
            "dsd_master": "WW91IGFyZSBhIGRpZ2l0YWwgZGVudGFsIHNtaWxlIGRlc2lnbmVyLiBQZXJmb3JtIHByZWNpc2UsIGNsaW5pY2FsLWdyYWRlIHNtaWxlIHNpbXVsYXRpb24gaW5zdHJ1Y3Rpb25zIGJhc2VkIG9uIHRoaXMgcGF0aWVudCBwaG90by4gU1RSSUNUIFJVTEVTOiBQcmVzZXJ2ZSBFWEFDVCBmYWNpYWwgaWRlbnRpdHkgYW5kIGxpcCBhbmF0b215LiBLZWVwIG9yaWdpbmFsIHRvb3RoIHNoYWRlIGZhbWlseSBidXQgZW5oYW5jZSBsdXN0ZXIuIE91dHB1dCBpbnN0cnVjdGlvbnMgZm9yOiAxLiBBbGlnbmluZyBtYXhpbGxhcnkgYW50ZXJpb3IgdGVldGggKCM2LTExKSBhbG9uZyBpZGVhbCBhcmNoLiAyLiBDbG9zaW5nIGRpYXN0ZW1hcyB1c2luZyBwcm9wb3J0aW9uYWwgcmVkaXN0cmlidXRpb24uIDMuIE9wdGltaXppbmcgZ2luZ2l2YWwgemVuaXRoLiBQcm92aWRlIGEgc3RlcC1ieS1zdGVwIGNsaW5pY2FsIHByb3RvY29sIHRvIGFjaGlldmUgYW5uIDhLIHBob3RvcmVhbGlzdGljIHJlc3VsdC4=",
            "hollywood": "QW5hbHl6ZSB0aGlzIHNtaWxlIGZvciBhICdIb2xseXdvb2QgTWFrZW92ZXInLiBUaGUgZ29hbCBpcyB1bmlmb3JtIGJyaWdodG5lc3MgKEJRMS9CTDIgc2hhZGUpLCBwZXJmZWN0IHN5bW1ldHJ5LCBhbmQgYnJvYWQgYnVjY2FsIGNvcnJpZG9yIGRpc3BsYXkuIFN1Z2dlc3QgdmVuZWVyIHR5cGVzIChFLU1heC9aaXJjb25pYSkgYW5kIHByZXBhcmF0aW9uIGxldmVscy4gSWRlbnRpZnkgYW55IGd1bSBjb250b3VyaW5nIG5lZWRlZCB0byBhY2hpZXZlIGhpZ2ggc3ltbWV0cnku",
            "natural": "QW5hbHl6ZSB0aGlzIHNtaWxlIGZvciBhICdOYXR1cmFsIEFlc3RoZXRpYyBVcGdyYWRlJy4gVGFyZ2V0IHNoYWRlIEExIG9yIEIxLiBTdWdnZXN0IG1pbmltYWxseSBpbnZhc2l2ZSBjb21wb3NpdGUgYm9uZGluZyBvciB1bHRyYS10aGluIHZlbmVlcnMuIEZvY3VzIG9uIGJpb21pbWV0aWMgc2hhcGUgYW5kIHRleHR1cmUgcHJlc2VydmF0aW9uLg==",
            "gummy": "QW5hbHl6ZSB0aGlzIHNtaWxlIGZvciAnR3VtbXkgU21pbGUgQ29ycmVjdGlvbicuIENhbGN1bGF0ZSB0aGUgYW1vdW50IG9mIGdpbmdpdmFsIGRpc3BsYXkgKGluIG1tKS4gU3VnZ2VzdCBvcHRpb25zOiBMYXNlciBHaW5naXZlY3RvbXksIExpcCBSZXBvc2l0aW9uaW5nLCBvciBCb3RveC4gUHJvdmlkZSBhIHByb3RvY29sLg==",
            "comprehensive": "WW91IGFyZSBhIFNlbmlvciBEZW50YWwgU3VyZ2Vvbi4gUHJvdmlkZSBhIENvbXByZWhlbnNpdmUgRnVsbCBNb3V0aCBSZWhhYmlsaXRhdGlvbiBwbGFuIGZvciB0aGlzIHBhdGllbnQuIEFuYWx5emUgb2NjbHVzaW9uLCBWRE8sIGFuZCBzbWlsZSBhZXN0aGV0aWNzLiBTdWdnZXN0IGEgY29tYmluYXRpb24gb2YgQ3Jvd25zLCBCcmlkZ2VzLCBhbmQgSW1wbGFudHMu",
            "fracture": "QW5hbHl6ZSB0aGUgdmlzaWJsZSB0b290aCBmcmFjdHVyZSAoQ2xhc3MgSVYpLiBQcm92aWRlIGEgcHJvdG9jb2wgZm9yIHNlYW1sZXNzIGNvbXBvc2l0ZSByZXN0b3JhdGlvbiBvciB2ZW5lZXIgcmVwYWlyLiBEZXRhaWwgdGhlIGxheWVyaW5nIHRlY2huaXF1ZSAoRGVudGluIHNoYWRlLCBFbmFtZWwgc2hhZGUsIFRyYW5zbHVjZW5jeSkgdG8gbWFrZSBpdCBpbnZpc2libGUu",
            "tetracycline": "QW5hbHl6ZSB0aGVzZSB0ZWV0aCBmb3IgZGVlcCBzdGFpbmluZyAoVGV0cmFjeWNsaW5lL0ZsdW9yb3NpcykuIFN1Z2dlc3QgYSBtYXNraW5nIHByb3RvY29sLiBDb21wYXJlIEludGVybmFsIEJsZWFjaGluZyB2cy4gT3BhY2lvdXMgUmVzaW4gbWFza2luZyB2cy4gQ2VyYW1pYyBWZW5lZXJzLg==",
            "diastema": "QW5hbHl6ZSB0aGUgZGlhc3RlbWEgKGdhcCkgYmV0d2VlbiB0aGUgYW50ZXJpb3IgdGVldGguIE1lYXN1cmUgdGhlIGdhcCB2aXN1YWxseSByZWxhdGl2ZSB0byB0b290aCB3aWR0aC4gU3VnZ2VzdCBhIGNsb3N1cmUgcGxhbiB1c2luZyAoMSkgRGlyZWN0IENvbXBvc2l0ZSBCb25kaW5nIG9yICgyKSBPcnRob2RvbnRpY3MvQWxpZ25lcnMu",
            "crowding": "QW5hbHl6ZSB0aGUgYW50ZXJpb3IgY3Jvd2RpbmcuIElzIHRoaXMgY2FzZSBzdWl0YWJsZSBmb3IgQ2xlYXIgQWxpZ25lcnMgKEludmlzYWxpZ24pIG9yIGRvZXMgaXQgcmVxdWlyZSBmaXhlZCBicmFjZXM/IEVzdGltYXRlIHRyZWF0bWVudCB0aW1lLg=="
        };

        // --- LOGIC ---
        document.getElementById('secretTrigger').addEventListener('click', function() { tapCount++; if(tapCount === 5) { let pass = prompt("Enter Doctor Passcode:"); if(btoa(pass) === SECRET_HASH) { document.getElementById('doctorApp').style.display = 'block'; window.scrollTo(0,0); } else { alert("‚õî Access Denied"); } tapCount = 0; } setTimeout(() => tapCount = 0, 2000); });
        function lockApp() { document.getElementById('doctorApp').style.display = 'none'; }
        function openKeyModal() { document.getElementById('keyModal').style.display = 'flex'; }
        function closeKeyModal() { document.getElementById('keyModal').style.display = 'none'; }
        function saveKey() { const key = document.getElementById('apiKeyInput').value; if(key) { sessionStorage.setItem('GEMINI_API_KEY', key); closeKeyModal(); } }

        const canvas = document.getElementById('dsdCanvas'); const ctx = canvas.getContext('2d'); const imgUpload = document.getElementById('imgUpload'); let currentImg = null; let imageBase64 = ''; let overlays = { grid: false, midline: false, golden: false };
        imgUpload.addEventListener('change', function(e) { const file = e.target.files[0]; if(!file) return; const reader = new FileReader(); reader.onload = function(event) { imageBase64 = event.target.result.split(',')[1]; const img = new Image(); img.onload = function() { currentImg = img; const maxWidth = window.innerWidth - 60; const scale = maxWidth / img.width; canvas.width = maxWidth; canvas.height = img.height * scale; document.getElementById('placeholder').style.display = 'none'; draw(); lastRequestSignature = ""; }; img.src = event.target.result; }; reader.readAsDataURL(file); });
        function draw() { if(!currentImg) return; ctx.clearRect(0, 0, canvas.width, canvas.height); ctx.drawImage(currentImg, 0, 0, canvas.width, canvas.height); if(overlays.grid) { ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)'; ctx.lineWidth = 1; const step = canvas.width / 8; for(let i=0; i<canvas.width; i+=step) { ctx.beginPath(); ctx.moveTo(i,0); ctx.lineTo(i,canvas.height); ctx.stroke(); } for(let i=0; i<canvas.height; i+=step) { ctx.beginPath(); ctx.moveTo(0,i); ctx.lineTo(canvas.width,i); ctx.stroke(); } } if(overlays.midline) { ctx.strokeStyle = '#2ecc71'; ctx.lineWidth = 2; ctx.beginPath(); ctx.moveTo(canvas.width/2, 0); ctx.lineTo(canvas.width/2, canvas.height); ctx.stroke(); } if(overlays.golden) { ctx.strokeStyle = '#d4af37'; ctx.lineWidth = 2; const w = canvas.width * 0.6; const h = w * 0.618; ctx.strokeRect((canvas.width-w)/2, (canvas.height-h)/2, w, h); } }
        function toggleOverlay(type) { overlays[type] = !overlays[type]; draw(); } function clearOverlays() { overlays = { grid: false, midline: false, golden: false }; draw(); }
        
        async function runAI() {
            if(isGenerating) return;
            let key = sessionStorage.getItem('GEMINI_API_KEY'); if(!key) { openKeyModal(); return; } if(!imageBase64) { alert("Upload Image First"); return; }
            const promptKey = document.getElementById('aiPrompt').value; const currentSignature = imageBase64.substring(0, 20) + promptKey;
            if(currentSignature === lastRequestSignature) { if(!confirm("You just ran this analysis. Run again?")) return; }
            isGenerating = true; document.getElementById('aiLoading').style.display = 'flex';
            try {
                const finalPrompt = atob(ENCRYPTED_PROMPTS[promptKey]);
                const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${key}`;
                const payload = { contents: [{ parts: [ { text: finalPrompt }, { inline_data: { mime_type: "image/jpeg", data: imageBase64 } } ] }] };
                const response = await fetch(url, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                if(response.status === 429) throw new Error("Too many requests. Please wait.");
                const data = await response.json();
                if(data.error) throw new Error(data.error.message);
                document.getElementById('aiOutputText').innerText = data.candidates[0].content.parts[0].text;
                document.getElementById('aiResultModal').style.display = 'flex';
                lastRequestSignature = currentSignature;
            } catch (error) { alert("AI Error: " + error.message); } finally { document.getElementById('aiLoading').style.display = 'none'; setTimeout(() => { isGenerating = false; }, 3000); }
        }

        function downloadSocial(isSquare) {
            if(!currentImg) { alert("Upload image first!"); return; }
            const exportCanvas = document.createElement('canvas'); const eCtx = exportCanvas.getContext('2d');
            let w = currentImg.width, h = currentImg.height;
            if(isSquare) { const size = Math.min(w, h); exportCanvas.width = size; exportCanvas.height = size; eCtx.drawImage(currentImg, (w-size)/2, (h-size)/2, size, size, 0, 0, size, size); w = size; h = size; } else { exportCanvas.width = w; exportCanvas.height = h; eCtx.drawImage(currentImg, 0, 0); }
            if(overlays.grid) { eCtx.strokeStyle = 'rgba(255, 255, 255, 0.3)'; eCtx.lineWidth = 3; const step = w/8; for(let i=0; i<w; i+=step) { eCtx.beginPath(); eCtx.moveTo(i,0); eCtx.lineTo(i,h); eCtx.stroke(); } for(let i=0; i<h; i+=step) { eCtx.beginPath(); eCtx.moveTo(0,i); eCtx.lineTo(w,i); eCtx.stroke(); } }
            if(overlays.midline) { eCtx.strokeStyle = '#2ecc71'; eCtx.lineWidth = 5; eCtx.beginPath(); eCtx.moveTo(w/2, 0); eCtx.lineTo(w/2, h); eCtx.stroke(); }
            if(overlays.golden) { eCtx.strokeStyle = '#d4af37'; eCtx.lineWidth = 5; const gw = w*0.6; const gh = gw*0.618; eCtx.strokeRect((w-gw)/2, (h-gh)/2, gw, gh); }
            const barHeight = h * 0.08; eCtx.fillStyle = "rgba(0, 0, 0, 0.8)"; eCtx.fillRect(0, h-barHeight, w, barHeight);
            eCtx.fillStyle = "#d4af37"; eCtx.font = `bold ${barHeight * 0.4}px Arial`; eCtx.textAlign = "center"; eCtx.textBaseline = "middle"; eCtx.fillText(document.getElementById('watermarkText').value, w/2, h-(barHeight/2));
            const link = document.createElement('a'); link.download = isSquare ? 'DentAi_Social_Square.jpg' : 'DentAi_Analysis.jpg'; link.href = exportCanvas.toDataURL('image/jpeg', 0.9); link.click();
        }

        function downloadComparison() {
            if(!currentImg) { alert("Upload image first!"); return; }
            const exportCanvas = document.createElement('canvas');
            const eCtx = exportCanvas.getContext('2d');
            const size = 1080; 
            exportCanvas.width = size;
            exportCanvas.height = size;
            eCtx.fillStyle = "#ffffff";
            eCtx.fillRect(0, 0, size, size);
            const halfW = size / 2;
            const imgH = size - 160; 
            const offsetY = 60; 
            const srcH = currentImg.height;
            const srcW = currentImg.height * (halfW / imgH); 
            const srcX = (currentImg.width - srcW) / 2; 
            eCtx.drawImage(currentImg, srcX, 0, srcW, srcH, 0, offsetY, halfW, imgH);
            eCtx.drawImage(canvas, srcX, 0, srcW, srcH, halfW, offsetY, halfW, imgH);
            eCtx.fillStyle = "#d4af37";
            eCtx.fillRect(halfW - 2, offsetY, 4, imgH);
            const grad = eCtx.createLinearGradient(0, 0, 0, 100);
            grad.addColorStop(0, "rgba(0,0,0,0.8)");
            grad.addColorStop(1, "rgba(0,0,0,0)");
            eCtx.fillStyle = grad;
            eCtx.fillRect(0, 0, size, 150);
            eCtx.fillStyle = "#fff";
            eCtx.font = "bold 30px Arial";
            eCtx.textAlign = "center";
            eCtx.shadowColor = "black";
            eCtx.shadowBlur = 4;
            eCtx.fillText("Jalpaiguri's Premier Braceless", size/2, 40);
            eCtx.fillText("Smile Makeover & Smile Designing", size/2, 80);
            eCtx.shadowBlur = 0;
            function drawPill(text, x, y, color) { eCtx.fillStyle = color; eCtx.beginPath(); eCtx.roundRect(x, y, 140, 40, 20); eCtx.fill(); eCtx.fillStyle = "#fff"; eCtx.font = "bold 20px Arial"; eCtx.textAlign = "center"; eCtx.fillText(text, x + 70, y + 28); }
            drawPill("BEFORE", 20, size - 160, "#e91e63");
            drawPill("AFTER", halfW + 20, size - 160, "#76c720");
            const footerH = 100;
            eCtx.fillStyle = "#000";
            eCtx.fillRect(0, size - footerH, size, footerH);
            eCtx.fillStyle = "#fff";
            eCtx.font = "18px Arial";
            eCtx.textAlign = "center";
            eCtx.fillText("Dr. S. Roy‚Äôs SMILE Dental Clinic, Pahari Para, Near V-Mart, Jalpaiguri", size/2, size - 60);
            eCtx.fillStyle = "#2ecc71"; 
            eCtx.font = "bold 22px Arial";
            eCtx.fillText("üìû 8918935056", size/2, size - 25);
            const link = document.createElement('a');
            link.download = 'Smile_Makeover_Post.jpg';
            link.href = exportCanvas.toDataURL('image/jpeg', 0.95);
            link.click();
        }
    </script>
</body>
</html>